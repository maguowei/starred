# Starred

[![CI](https://github.com/maguowei/starred/actions/workflows/ci.yml/badge.svg)](https://github.com/maguowei/starred/actions/workflows/ci.yml)
[![Publish Python Package](https://github.com/maguowei/starred/actions/workflows/publish.yml/badge.svg)](https://github.com/maguowei/starred/actions/workflows/publish.yml)

[English](README.md) | 简体中文

基于你的 GitHub Stars 自动生成并维护 Awesome 风格的 Markdown 列表。

## 功能

- 从已 Star 的仓库生成 Markdown 列表。
- 按语言（默认）或按仓库 Topic 分组。
- 可按分类名称字母序排序。
- 可直接写入并更新指定 GitHub 仓库中的文件。
- 使用 `--private` 可包含私有仓库。

## 安装

要求 Python `3.10+`。

```bash
pip install starred
```

## 快速开始

1. 创建 GitHub Token：[Personal access tokens](https://github.com/settings/tokens)
2. 基于你的 Stars 生成 README：

```bash
export GITHUB_TOKEN=<your-token>
starred --username <your-github-username> --sort > README.md
```

## 命令行用法

```bash
starred --help
```

常用参数：

- `--username`：GitHub 用户名（必填）
- `--token`：GitHub Token（必填）
- `--sort`：按分类名称字母序排序
- `--topic`：按 Topic 分组（默认按语言）
- `--topic_limit`：Topic 热度阈值（默认 `500`）
- `--repository`：要更新/创建的目标仓库名
- `--filename`：仓库内目标文件名（默认 `README.md`）
- `--message`：更新文件时使用的 commit message
- `--private`：包含私有仓库

## 直接更新目标仓库

下面的命令会在仓库不存在时自动创建仓库，然后更新该仓库中的 `README.md`。

```bash
export GITHUB_TOKEN=<your-token>
starred --username <your-github-username> --repository awesome-stars --sort
```

示例仓库：

- [maguowei/awesome-stars](https://github.com/maguowei/awesome-stars)

## 使用 `awesome-stars` 模板

推荐直接使用 [maguowei/awesome-stars](https://github.com/maguowei/awesome-stars/generate) 模板仓库。它内置了 GitHub Actions 定时任务，可自动更新。

1. 点击 [Create a new repository from awesome-stars](https://github.com/maguowei/awesome-stars/generate)。

![Use awesome-stars as template](imgs/use-awesome-stars-as-template.png)

2. 配置工作流 Token 权限：
   [Set `GITHUB_TOKEN` permissions](https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/enabling-features-for-your-repository/managing-github-actions-settings-for-a-repository#setting-the-permissions-of-the-github_token-for-your-repository)

将权限设置为 `Read and write permissions`，然后点击 `Save`。

![Workflow permissions](imgs/workflow-permissions.png)

3. 首次手动运行工作流，点击 `Run workflow`。

![Run workflow](imgs/run-workflow.png)

4. 按需修改定时配置：
   [.github/workflows/schedules.yml#L5](https://github.com/maguowei/awesome-stars/blob/master/.github/workflows/schedules.yml#L5)

![Schedule](imgs/schedule.png)

## 谁在使用 `starred`？

- 代码搜索：[Generated by starred](https://github.com/search?p=1&q=%22Generated+by+starred%22&type=Code)
- Topic 页面：
  - [starred](https://github.com/topics/starred)
  - [awesome-stars](https://github.com/topics/awesome-stars)

## 开发

```bash
uv sync --dev
uv run starred --help
```

从源码构建并安装：

```bash
uv build
pip install dist/starred-<version>.tar.gz
```
